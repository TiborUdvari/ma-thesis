<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Processing 1.0 _ALPHA_ - Getting global coordinates</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15">
	<link type="text/css" href="style.css" rel="stylesheet" >
<script language="JavaScript1.2" type="text/javascript">
<!--
if ((navigator.appVersion.substring(0,1) == "5" && navigator.userAgent.indexOf('Gecko') != -1) || navigator.userAgent.search(/Opera/) != -1) {
   document.write('<META HTTP-EQUIV="pragma" CONTENT="no-cache">');
}
// -->
</script>
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#CC6600" vlink="#CC6600" alink="#CC6600" leftmargin="0" topmargin="0" rightmargin="0">
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="550" colspan="2" bgcolor="#000000"> <img src="images/processing.gif" width="500" height="50"></td>
    <td width="180" align="right" valign="top" bgcolor="#000000"> <img src="images/1pix.gif" width="100" height="5"><br>
        <a href="https://forum.processing.org/faq/index.html"><font color="#CC9900">FAQ</font></a> 
    </td>
    <td width="20" bgcolor="#000000"><img src="images/nav_topright.gif" width="20" height="50"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55" bgcolor="#996600" valign="top"><img src="images/nav_midleft.gif" width="55" height="25"></td>
    <td width="675" valign="top" rowspan="2"> 
      <table width="675" valign="top" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="25" bgcolor="#996600"><a href="http://processing.org/"><font color="#FFFFFF">Cover</font></a></td>
		<td height="25" bgcolor="#996600"><div id="menu_right" style="float: right">
			<a href="http://feed.processing.org/">&raquo;Feed</a> &nbsp;
			<a href="http://forum.processing.org/">&raquo;Forum</a> &nbsp;
			<a href="http://wiki.processing.org/">&raquo;Wiki</a> &nbsp;
			<a href="http://code.google.com/p/processing">&raquo;Code</a>
		</div></td>
        </tr>

      </table>
    </td>
    <td width="20" bgcolor="#996600" valign="top"></td>
  </tr>
  <tr>
	<td height="25" colspan="3"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55"><img src="images/1pix.gif" width="1" height="25"></td>
    <td width="695"> </td>
  </tr>
  <tr>
    <td><img src="images/1pix.gif" width="55" height="1"></td>
    <td align="left" valign="top"><b>
		This is the archive Discourse for the Processing (ALPHA) software. <br />
		Please visit the <a href="http://forum.processing.org/">new Processing forum</a> for current information.
		<br />
		<br />
		</b>
	</td>
  </tr>
  <tr> 
    <td><img src="images/1pix.gif" width="55" height="45"></td>
  </tr>
</table>
<!--#echo banner=""--> 
<table width="750" align="left" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55"></td>
    <td width="695">
<script language="JavaScript1.2" src="public_html/ubbc.js" type="text/javascript"></script>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td valign=bottom colspan="2"><font class="nav"><B>
    <img src="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="index.html" class="nav">Processing 1.0 _ALPHA_</a><br>
    <img src="public_html/YaBBImages/tline.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Programs_action_display_num_1097538973.html#help" class="nav">Programming Questions & Help
</a><br>
    <img src="public_html/YaBBImages/tline2.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Programs.html" class="nav">Programs</a> </b>(Moderators: fry, REAS)<b><br>
    <img SRC="public_html/YaBBImages/tline3.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    Getting global coordinates</b></font></td>
    <td valign="bottom" align="right">&#171; <a href="board_Programs_action_display_num_1098036076.html">Previous topic</a> | <a href="board_Programs_action_display_num_1083289030.html">Next topic</a> &#187;</td>
  </tr>
</table>
<BR>
<!-- THIS IS THE TOP HEADER OF THE CATEGORY -->
<table border="0" width="100%" cellspacing="1" cellpadding="4" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align="right">
            </td>
          </tr>
        </table>
  </tr>
</table>
<!-- THIS IS THE BOARD AUTHOR HEADER -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="1" border="0" width="100%">
      <tr>
        <td valign="middle" align="left" width="20%" bgcolor="#999966" class="titlebg">
        <font class="text1" color="#FFFFFF">&nbsp;<img src="public_html/YaBBImages/thread.gif" alt="">
        &nbsp;<b>Author</b></font></td>
        <td valign="middle" align="left" bgcolor="#999966" class="titlebg" width="80%">
        <font class="text1" color="#FFFFFF"><b>&nbsp;Topic: Getting global coordinates</b> &nbsp;(Read 833 times)</font></td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<a name="0"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>jhv2</b><br><BR>
     <a href="http://jasonvannest.com" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Getting global coordinates</b><BR>
                &#171; <B> on:</B> Oct 12<sup>th</sup>, 2004, 1:56am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Hi all, <br> &nbsp;<br> I am modeling something much like a solar-system, with Suns, planets, and moons. &nbsp;It was easy to calculate because with push() and pop() I can translate and rotate all over the place to draw each moon relative to each planet. <br> &nbsp;<br> All I needed was to store (in an array) and calculate three angles and a radius to get all the 3d wobbles and twists I was looking for. &nbsp; <br> &nbsp;<br> Now, I would like to draw lines and boxes recording each step of the 3d systems for dxf export into Rhino. &nbsp;The problem is I need to store the variables using a Global coordinate system, not all these angles!!! <br> &nbsp;<br> The screenX and screenY commands are working for me, but as many have also noted in this forum, screenZ isn't that great. &nbsp;It returns valse betwen .95 an 1 for me. <br> &nbsp;<br> As a result, I'm drawing these moons' lines as flatened tubes - twisting thru space. &nbsp;Very frustrating. &nbsp;Has anyone found a way around this problem? &nbsp;I need a way to get polar cordinates relative to push() and pop() into global coordinates? <br> &nbsp;<br> (will post code &amp; a link here in 2 hours) <br> &nbsp;<br> Thanks, <br> &nbsp;<br> Jason <br> &nbsp;<br> 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="1"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>cello</b><br><BR><a href="aim:goim?screenname=marcello3d&message=Hi.+Are+you+there?"><img src="public_html/YaBBImages/aim.gif" alt="marcello3d" border="0"></a>
     <a href="http://marcello.cellosoft.com/" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #1 on:</B> Oct 12<sup>th</sup>, 2004, 3:00am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            I'm probably wrong, but have you tried the objectX/Y/Z commands? <br> &nbsp;<br> Marcello 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="2"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>jhv2</b><br><BR>
     <a href="http://jasonvannest.com" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #2 on:</B> Oct 12<sup>th</sup>, 2004, 4:18am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Right, <br> &nbsp;<br> I'm with you there, I used the screenX command as input for the objectX as in the code below..., it doesn't work... <br> &nbsp;<br> Also I can only post the code as the applet won't expot yet, the code is here... <br> &nbsp;<br> <a href="http://pantheon.yale.edu/~jhv2/Arg.html" target="_blank">http://pantheon.yale.edu/~jhv2/Arg.html</a> <br> &nbsp;<br> but the problem is pasted below... (thanks) <br> &nbsp;<br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;void step_Satellites&#40;&#41;{ <br> &nbsp;   if&#40; THIS_STEP &gt;= sat_Path&#46;length &#41;{ <br> &nbsp;     float&#91;&#93;&#91;&#93; temp = new float&#91; sat_Path&#46;length+MAX_ARRAY &#93;&#91;3&#93;; <br> &nbsp;     System&#46;arraycopy&#40; sat_Path, 0, temp, 0, sat_Path&#46;length &#41;; <br> &nbsp;     sat_Path = temp; <br> &nbsp;   } <br> &nbsp;<br> &nbsp;   angularVelocity = angularVelocity + random&#40;&#45;SWOOSHYNESS, SWOOSHYNESS&#41;; <br> &nbsp;   theta += angularVelocity; <br> &nbsp;<br> &nbsp;   &#47;&#47; Calculate coordinates and stuff&#46; <br> &nbsp;   &#47;&#47; Get the last position of the particle&#46; <br> &nbsp;   float x1 = parent&#46;px; <br> &nbsp;   float y1 = parent&#46;py; <br> &nbsp;   float z1 = parent&#46;pz; <br> &nbsp;<br> &nbsp;   &#47;&#47; Get the current position of the particle&#46; <br> &nbsp;   float x2 = parent&#46;x; <br> &nbsp;   float y2 = parent&#46;y; <br> &nbsp;   float z2 = parent&#46;z; <br> &nbsp;<br> &nbsp; float&#91;&#93; vec = { x2&#45;x1, y2&#45;y1, z2&#45;z1 }; <br> &nbsp;   float mag = sqrt&#40; pow&#40;vec&#91;0&#93;,2&#41; + pow&#40;vec&#91;1&#93;,2&#41; + pow&#40;vec&#91;2&#93;,2&#41; &#41;; <br> &nbsp;   float mag_xy = sqrt&#40; pow&#40;vec&#91;0&#93;,2&#41; + pow&#40;vec&#91;1&#93;,2&#41; &#41;; <br> &nbsp;   float mag_z = sqrt&#40; pow&#40;mag,2&#41; &#45; pow&#40;mag_xy,2&#41; &#41;; <br> &nbsp;   float altitude = &#45;atan2&#40; mag_z,mag_xy &#41;; <br> &nbsp;   if&#40; z1&gt;z2 &#41; altitude = &#45;altitude; <br> &nbsp;   float azimuth = atan2&#40; vec&#91;1&#93;, vec&#91;0&#93; &#41;; <br> &nbsp; float&#91;&#93; mid = { vec&#91;0&#93;&#47;2&#46;0f+x1, vec&#91;1&#93;&#47;2&#46;0f+y1, vec&#91;2&#93;&#47;2&#46;0f+z1 }; <br> &nbsp;<br> &nbsp;   push&#40;&#41;; &#47;&#47;pushMatrix&#40;&#41;; <br> &nbsp;<br> &nbsp;   &#47;&#47; Translate to the current position of the particle&#46; <br> &nbsp;   translate&#40; x2, y2, z2 &#41;;   &#47;&#47;applyTranslation&#40; x2, y2, z2 &#41;; <br> &nbsp;<br> &nbsp;   &#47;&#47; Rotate the coordinate axes to align with the particle's path&#46; <br> &nbsp;   rotateZ&#40; azimuth &#41;;    &#47;&#47;applyRotation&#40; 0,0,1,azimuth &#41;; <br> &nbsp;   rotateY&#40; altitude &#41;;   &#47;&#47;applyRotation&#40; 0,1,0,altitude &#41;; <br> &nbsp;<br> &nbsp;   &#47;&#47; Rotate around the x&#45;axis to get the position of the satellite&#46; <br> &nbsp;   rotateX&#40; theta &#41;;    &#47;&#47;applyRotation&#40; 1,0,0,theta &#41;; <br> &nbsp;<br> &nbsp;   &#47;&#47; Translate to the satellite's position away from the parent&#46; <br> &nbsp;   translate&#40; 0, radiusAroundParent, 0 &#41;;  &#47;&#47;applyTranslation&#40; 0, radiusAroundParent, 0 &#41;; <br> &nbsp;<br> &nbsp;   float&#91;&#93; satellitePosition; &#47;&#47;= applyCurrentMatrix&#40; 0,0,0 &#41;; <br> &nbsp;<br> &nbsp;   float sx, sy, sz; <br> &nbsp;   sx = screenX&#40;0,0,0&#41;;   &lt;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;HERE AND BELOW <br> &nbsp;   sy = screenY&#40;0,0,0&#41;; <br> &nbsp;   &#47;&#47;sz = screenZ&#40;0,0,0&#41;; <br> &nbsp;<br> &nbsp;   push&#40;&#41;; <br> &nbsp;   rotateX&#40;PI&#41;; <br> &nbsp;   sz = screenY&#40;0,0,0&#41;; <br> &nbsp;   pop&#40;&#41;; <br> &nbsp;<br> &nbsp;   pop&#40;&#41;; <br> &nbsp;<br> &nbsp;   &#47;&#47; Reorient to the world axes and find the satellite's real coordinates&#46; <br> &nbsp;   sat_Path&#91;THIS_STEP&#93;&#91;0&#93; = objectX&#40;sx,sy,sz&#41;; <br> &nbsp;   sat_Path&#91;THIS_STEP&#93;&#91;1&#93; = objectY&#40;sx,sy,sz&#41;; <br> &nbsp;   sat_Path&#91;THIS_STEP&#93;&#91;2&#93; = objectZ&#40;sx,sy,sz&#41;; <br> &nbsp; } <br>  </font></td></tr></table></td></tr></table> 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Oct 12<sup>th</sup>, 2004, 9:13pm by jhv2</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="3"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>fry</b><br><i></i><BR><BR>
     <a href="http://acg.media.mit.edu/people/fry/" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #3 on:</B> Oct 12<sup>th</sup>, 2004, 5:21am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            screen* and object* aren't supposed to be used together like that, they're not functions of one another in any way. use objectX/Y/Z to get the transformed version of the coordinates in object space, these will be suitable for writing out to a file. &nbsp;<br> &nbsp;<br> screenX/Y are just literally that--the on-screen coordinates. as mentioned elsewhere, since a screen has no Z, the value isn't useful except in comparison, because it's weighted against the distance away so that resolution in z decreases as you get away from the screen. &nbsp;<br> &nbsp;<br> someday we'll have more complete documentation for these things, but for now we have the forum <img border=0 src="public_html/YaBBImages/wink.gif"> 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="4"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>jhv2</b><br><BR>
     <a href="http://jasonvannest.com" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #4 on:</B> Oct 12<sup>th</sup>, 2004, 2:38pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            We kind of figured that the screenZ was a dead end, so we held our breath and we did our own matrix multiplication to keep track of the coordinates ourselves... Still no luck.  That code is below, and we couldn't find the error tripping us up... &nbsp;<br> &nbsp;<br> Perhaps anyone can think of an example program that might be doing what we're trying?  I don't even know where to look! <br> &nbsp;<br> (thanks again ya'll, and continued sucess to all!!!) <br> &nbsp;<br> Jason <br> &nbsp;<br> &nbsp;<br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;<br> float&#91;&#93;&#91;&#93; currentTransformation = { { 1,0,0,0 }, <br> { 0,1,0,0 }, <br> { 0,0,1,0 }, <br> { 0,0,0,1 } };float&#91;&#93; applyCurrentMatrix&#40; float x, float y, float z &#41;{ <br> float&#91;&#93; vector = { x,y,z,1 }; <br> float&#91;&#93; result = new float&#91;4&#93;; for&#40; int r=0;r&lt;4;r++ &#41; <br> for&#40; int n=0;n&lt;4;n++ &#41; <br> result&#91;r&#93; += currentTransformation&#91;r&#93;&#91;n&#93; * vector&#91;n&#93;; return result; <br> }float&#91;&#93;&#91;&#93; multiplyMatrices&#40; float matrix0&#91;&#93;&#91;&#93;, float matrix1&#91;&#93;&#91;&#93; &#41;{ <br> float&#91;&#93;&#91;&#93; result = new float&#91;4&#93;&#91;4&#93;; for&#40; int r=0;r&lt;3;r++ &#41;{ <br> for&#40; int c=0;c&lt;3;c++ &#41;{ <br> result&#91;r&#93;&#91;c&#93; = 0; for&#40; int n=0;n&lt;3;n++ &#41; <br> result&#91;r&#93;&#91;c&#93; += matrix0&#91;r&#93;&#91;n&#93; * matrix1&#91;n&#93;&#91;c&#93;; } <br> } return result; <br> }void applyTranslation&#40; float x, float y, float z &#41;{ <br> float&#91;&#93;&#91;&#93; translation = { { 1,0,0,x }, <br> { 0,1,0,y }, <br> { 0,0,1,z }, <br> { 0,0,0,1 } }; currentTransformation = multiplyMatrices&#40; currentTransformation, translation &#41;; <br> }void applyRotation&#40; float x, float y, float z, float angle &#41;{ <br> float vector&#91;&#93; = { x, y, z, 1 }; <br> float mag = sqrt&#40; pow&#40;vector&#91;0&#93;,2&#41; + pow&#40;vector&#91;1&#93;,2&#41; + pow&#40;vector&#91;2&#93;,2&#41; &#41;; <br> float&#91;&#93; u = { vector&#91;0&#93;&#47;mag, vector&#91;1&#93;&#47;mag, vector&#91;2&#93;&#47;mag }; <br> float rotation&#91;&#93;&#91;&#93; = { { 0,0,0,0 }, <br> { 0,0,0,0 }, <br> { 0,0,0,0 }, <br> { 0,0,0,1 } };float&#91;&#93;&#91;&#93; S = { { 0,&#45;u&#91;2&#93;,u&#91;1&#93; }, <br> { u&#91;2&#93;, 0, &#45;u&#91;0&#93; }, <br> { &#45;u&#91;1&#93;, u&#91;0&#93;, 0 } };float&#91;&#93;&#91;&#93; uuT = { { u&#91;0&#93;*u&#91;0&#93;, u&#91;0&#93;*u&#91;1&#93;, u&#91;0&#93;*u&#91;2&#93; }, <br> { u&#91;0&#93;*u&#91;1&#93;, u&#91;1&#93;*u&#91;1&#93;, u&#91;1&#93;*u&#91;2&#93; }, <br> { u&#91;0&#93;*u&#91;2&#93;, u&#91;1&#93;*u&#91;2&#93;, u&#91;2&#93;*u&#91;2&#93; } };float&#91;&#93;&#91;&#93; IuuT = { { 1&#45;u&#91;0&#93;*u&#91;0&#93;, u&#91;0&#93;*u&#91;1&#93;, u&#91;0&#93;*u&#91;2&#93; }, <br> { u&#91;0&#93;*u&#91;1&#93;, 1&#45;u&#91;1&#93;*u&#91;1&#93;, u&#91;1&#93;*u&#91;2&#93; }, <br> { u&#91;0&#93;*u&#91;2&#93;, u&#91;1&#93;*u&#91;2&#93;, 1&#45;u&#91;2&#93;*u&#91;2&#93; } }; for&#40; int r=0;r&lt;3;r++ &#41;{ <br> for&#40; int c=0;c&lt;3;c++ &#41;{ <br> S&#91;r&#93;&#91;c&#93; *= sin&#40;angle&#41;; <br> IuuT&#91;r&#93;&#91;c&#93; *= cos&#40;angle&#41;; <br> } <br> } for&#40; int r=0;r&lt;3;r++ &#41;{ <br> for&#40; int c=0;c&lt;3;c++ &#41;{ <br> rotation&#91;r&#93;&#91;c&#93; = uuT&#91;r&#93;&#91;c&#93; + IuuT&#91;r&#93;&#91;c&#93; + S&#91;r&#93;&#91;c&#93;; <br> &nbsp;<br>  </font></td></tr></table></td></tr></table> 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Oct 12<sup>th</sup>, 2004, 9:12pm by jhv2</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="5"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>_alcys_</b><br><BR>
    <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #5 on:</B> Oct 12<sup>th</sup>, 2004, 2:47pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Hi, <br> is a solution perhaps in this pde? &nbsp;See, in the source, the storage of the volute. <br> &nbsp;<br> <a href="http://www.alcys.com/p5/Alcys_RibbonAndRoll/applet/index.html" target="_blank">http://www.alcys.com/p5/Alcys_RibbonAndRoll/applet/index.html</a> 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="6"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>TomC</b><br><BR>
     <a href="http://www.tom-carden.co.uk/p5" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #6 on:</B> Oct 12<sup>th</sup>, 2004, 4:17pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Hmm, Jason... your code makes my head hurt! <br> &nbsp;<br> It looks like you're trying to do too many things at once. <br> &nbsp;<br> objectX/Y/Z will give the absolute x/y/z coordinates according to the current transforms. <br> &nbsp;<br> screenX/Y will give the position that a point will be drawn in 2D, according to the current transforms.  (If I understand correctly, screenZ will give you the value of the depth-buffer for that point, which probably isn't any use to you here). <br> &nbsp;<br> So you definitely want objectX/Y/Z. <br> &nbsp;<br> For planets, the neatest way is to start with a sun, and then nest the planets inside the sun's transforms, and then nest the moon transforms inside each planet. <br> &nbsp;<br> So if everything is stored in a class called Planet, with an array of Planets called children, then (pseudo)code for a draw function belonging to the planet object would be something like: <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> void draw&#40;&#41; { <br> &nbsp; push&#40;&#41;; <br> &nbsp; rotateY&#40;orbitAngle&#41;;        &#47;&#47; or whatever wacky 3D <br> &nbsp; translate&#40;0,0,orbitRadius&#41;; &#47;&#47; stuff you were doing &nbsp;<br> &nbsp; &#47;&#47; &#40;optionally store position using objectX&#47;Y&#47;Z&#41; <br> &nbsp; sphere&#40;radius&#41; <br> &nbsp; for &#40;int i = 0; i &lt; children&#46;length; i++&#41; { <br> &nbsp;   Planet p = &#40;Planet&#41;children&#91;i&#93;; <br> &nbsp;   p&#46;draw&#40;&#41;; <br> &nbsp; } <br> &nbsp; pop&#40;&#41;; <br> } <br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> &nbsp;<br> By the way, to mark up code on this forum, use BBCode, i.e. square brackets for &lt;code&gt; etc... 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Oct 12<sup>th</sup>, 2004, 4:28pm by TomC</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="7"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>jhv2</b><br><BR>
     <a href="http://jasonvannest.com" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: Getting global coordinates</b><BR>
                &#171; <B>Reply #7 on:</B> Oct 14<sup>th</sup>, 2004, 7:26pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Thanks guys, &nbsp;<br> &nbsp;<br> We got it to work with ScreenX, etc coordinates after all, no matrix multiplication necessary! &nbsp;We thought that screen* returned cordinates like in the blender environment, and were adding extra steps needlessly. &nbsp;I can appreciate how documenting ScreenX,Y,&amp;Z in reference might cause more confusion too, as its a little crazy to keep track of. <br> &nbsp;<br> Again, thanks for your help. <br> &nbsp;<br> Jason 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<!-- THIS IS THE BOTTOM HEADER -->
<table border=0 width="100%" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
    <td>
    <table cellpadding="4" cellspacing="1" border="0" width="100%">
      <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align=right>
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table><br>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td align="left" valign="top" colspan="2">
    </td>
    <td valign="top" height="18" align="right">
<form method="post" action="board_Programs_action_display_num_1097538973.html" name="jump">
<select name="values" onChange="if(this.options[this.selectedIndex].value) window.location.href="index.html" + this.options[this.selectedIndex].value;">
<option value="">Forum Jump:</option>
<option value="">-----------------------------</option>
<option value="#Discuss">Discussion</option>
<option value="">-----------------------------</option><option value="?board=Collaboration">&nbsp; - Community, Collaboration, Status</option>
<option value="?board=Events">&nbsp; - Events, Publications, Propaganda</option>
<option value="?board=general">&nbsp; - General Processing Discussion</option>
<option value="">-----------------------------</option>
<option value="#help">Programming Questions & Help</option>
<option value="">-----------------------------</option><option value="?board=Syntax">&nbsp; - Syntax</option>
<option selected value="?board=Programs">=> Programs</option>
<option value="?board=Integrate">&nbsp; - Integration</option>
<option value="">-----------------------------</option>
<option value="#Examples">Topics & Contributions</option>
<option value="">-----------------------------</option><option value="?board=Tools">&nbsp; - Tools</option>
<option value="?board=Contribution_Responsive">&nbsp; - Responsive Form, Games</option>
<option value="?board=Contribution_Info">&nbsp; - Information Visualization</option>
<option value="?board=Contribution_Simlation">&nbsp; - Simulation, Artificial Life</option>
<option value="?board=Contribution_Physical">&nbsp; - Tangible Computing</option>
<option value="?board=Contribution_Automated">&nbsp; - Automated Systems</option>
<option value="?board=Contributions_Audiovisual">&nbsp; - Sound</option>
<option value="?board=VideoCamera">&nbsp; - Video, Camera</option>
<option value="?board=Contributions_Beyond">&nbsp; - Beyond Categories</option>
<option value="">-----------------------------</option>
<option value="#Suggestions">Suggestions</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_Software">&nbsp; - Software Suggestions</option>
<option value="?board=proce55ing_website">&nbsp; - Website, Reference, Example Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Bugs">Bugs</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_software_bugs">&nbsp; - Software Bugs</option>
<option value="?board=Proce55ing_website_bugs">&nbsp; - Website, Reference, Example Bugs</option>
<option value="?board=BugFixes">&nbsp; - Bug Fixes, Implemented Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Teaching">Teaching</option>
<option value="">-----------------------------</option><option value="?board=CourseBlueprints">&nbsp; - Course Blueprints</option>
<option value="?board=TheoryandPractice">&nbsp; - Theory and Practice</option>
</select>
</form></td>
  </tr><tr>
    <td colspan="3" valign="top" align="right">&#171; <a href="board_Programs_action_display_num_1098036076.html">Previous topic</a> | <a href="board_Programs_action_display_num_1083289030.html">Next topic</a> &#187;</td>
  </tr>
</table>
</td>
  </tr>
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55" height="160"></td>
    <td width="695" valign="bottom"><style type="text/css">/*
<a href="index.html"><font size="1">Processing 1.0 _ALPHA_</font></a> &#187; <font size="1">Powered by</font> <a href="http://www.yabbforum.com"><font size="1">YaBB 1 Gold - SP 1.1</font></a><font size="1">!<BR>
YaBB © 2000-2002, </font><a href="http://www.xnull.com"><font size="1">Xnull</font></a><font size="1">. All Rights Reserved.</font>
*/</style></td>
  </tr>
</table>
</body>
</html>
