<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Processing 1.0 _ALPHA_ - ahhh HELP!! java.langOutOfMemoryError</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15">
	<link type="text/css" href="style.css" rel="stylesheet" >
<script language="JavaScript1.2" type="text/javascript">
<!--
if ((navigator.appVersion.substring(0,1) == "5" && navigator.userAgent.indexOf('Gecko') != -1) || navigator.userAgent.search(/Opera/) != -1) {
   document.write('<META HTTP-EQUIV="pragma" CONTENT="no-cache">');
}
// -->
</script>
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#CC6600" vlink="#CC6600" alink="#CC6600" leftmargin="0" topmargin="0" rightmargin="0">
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="550" colspan="2" bgcolor="#000000"> <img src="images/processing.gif" width="500" height="50"></td>
    <td width="180" align="right" valign="top" bgcolor="#000000"> <img src="images/1pix.gif" width="100" height="5"><br>
        <a href="https://forum.processing.org/faq/index.html"><font color="#CC9900">FAQ</font></a> 
    </td>
    <td width="20" bgcolor="#000000"><img src="images/nav_topright.gif" width="20" height="50"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55" bgcolor="#996600" valign="top"><img src="images/nav_midleft.gif" width="55" height="25"></td>
    <td width="675" valign="top" rowspan="2"> 
      <table width="675" valign="top" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="25" bgcolor="#996600"><a href="http://processing.org/"><font color="#FFFFFF">Cover</font></a></td>
		<td height="25" bgcolor="#996600"><div id="menu_right" style="float: right">
			<a href="http://feed.processing.org/">&raquo;Feed</a> &nbsp;
			<a href="http://forum.processing.org/">&raquo;Forum</a> &nbsp;
			<a href="http://wiki.processing.org/">&raquo;Wiki</a> &nbsp;
			<a href="http://code.google.com/p/processing">&raquo;Code</a>
		</div></td>
        </tr>

      </table>
    </td>
    <td width="20" bgcolor="#996600" valign="top"></td>
  </tr>
  <tr>
	<td height="25" colspan="3"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55"><img src="images/1pix.gif" width="1" height="25"></td>
    <td width="695"> </td>
  </tr>
  <tr>
    <td><img src="images/1pix.gif" width="55" height="1"></td>
    <td align="left" valign="top"><b>
		This is the archive Discourse for the Processing (ALPHA) software. <br />
		Please visit the <a href="http://forum.processing.org/">new Processing forum</a> for current information.
		<br />
		<br />
		</b>
	</td>
  </tr>
  <tr> 
    <td><img src="images/1pix.gif" width="55" height="45"></td>
  </tr>
</table>
<!--#echo banner=""--> 
<table width="750" align="left" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55"></td>
    <td width="695">
<script language="JavaScript1.2" src="public_html/ubbc.js" type="text/javascript"></script>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td valign=bottom colspan="2"><font class="nav"><B>
    <img src="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="index.html" class="nav">Processing 1.0 _ALPHA_</a><br>
    <img src="public_html/YaBBImages/tline.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Programs_action_display_num_1102236971.html#help" class="nav">Programming Questions & Help
</a><br>
    <img src="public_html/YaBBImages/tline2.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Programs.html" class="nav">Programs</a> </b>(Moderators: fry, REAS)<b><br>
    <img SRC="public_html/YaBBImages/tline3.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    ahhh HELP!! java.langOutOfMemoryError</b></font></td>
    <td valign="bottom" align="right">&#171; <a href="board_Programs_action_display_num_1102177687.html">Previous topic</a> | <a href="board_Programs_action_display_num_1102311303.html">Next topic</a> &#187;</td>
  </tr>
</table>
<BR>
<!-- THIS IS THE TOP HEADER OF THE CATEGORY -->
<table border="0" width="100%" cellspacing="1" cellpadding="4" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align="right">
            </td>
          </tr>
        </table>
  </tr>
</table>
<!-- THIS IS THE BOARD AUTHOR HEADER -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="1" border="0" width="100%">
      <tr>
        <td valign="middle" align="left" width="20%" bgcolor="#999966" class="titlebg">
        <font class="text1" color="#FFFFFF">&nbsp;<img src="public_html/YaBBImages/thread.gif" alt="">
        &nbsp;<b>Author</b></font></td>
        <td valign="middle" align="left" bgcolor="#999966" class="titlebg" width="80%">
        <font class="text1" color="#FFFFFF"><b>&nbsp;Topic: ahhh HELP!! java.langOutOfMemoryError</b> &nbsp;(Read 644 times)</font></td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<a name="0"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>K1diN5An3</b><br><BR>
    <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>ahhh HELP!! java.langOutOfMemoryError</b><BR>
                &#171; <B> on:</B> Dec 5<sup>th</sup>, 2004, 9:56am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            this is a long and complicated post please stay with me. trying to generate some graphics based on basic computer vision, getting &nbsp;<br> &nbsp;<br> java.lang.OutOfMemoryError <br> &lt;&lt;no stack trace available&gt;&gt; &nbsp;<br> bet i am allocating many more objects then i think &nbsp; <br> &nbsp;<br> the computer vision assumes that we learn the background images (bgpixels) before things comes into the frame, then a basic pixel subtraction is done,(see diff_bright) in the function findMHI() in the MHI class. If from the pixel is not part of the background it becomes white, and if it is moving 10 is accumulativly subtracted from the white so as to make a gradient. Then from the gradient the magnitude and the orientation of the motion can be extracted (see convolution). trying to use a sobel gradient mask. All that works fine, but when i try to implement graphic generation similar to Andreas Gysin's Chronodraw using an array of BImages, everything goes haywire. &nbsp; I hope all this make sense to somebody... The code is in the next post because its exceeds the message memory limit. ahh so frustrated! &nbsp; <br> &nbsp;<br> &nbsp;<br> &nbsp;<br> 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="1"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>K1diN5An3</b><br><BR>
    <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: ahhh HELP!! java.langOutOfMemoryError</b><BR>
                &#171; <B>Reply #1 on:</B> Dec 5<sup>th</sup>, 2004, 9:58am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            code from the previous message, ALL the code would fit in this message either, so the mhi class is the next post.. fuck this so frustrating... nobody is going to read all this.. <br> &nbsp;<br> int bgpixels[]; <br> int diffpix[]; <br> int showdiffpix[]; <br> &nbsp;<br> int n_width = 160; <br> int n_height = 120; <br> int n_pix = n_width * n_height; <br> int redmask &nbsp; = (255&lt;&lt;16); &nbsp;//0xFF hex 255 = 111111111 <br> int greenmask = (255&lt;&lt;<img border=0 src="public_html/YaBBImages/cool.gif">; <br> int bluemask &nbsp;= &nbsp;255; <br> int bgR,bgG,bgB,bg_brightness; <br> int hquads = 4; <br> int vquads = 1; <br> int quadwidth = 40; <br> int quadheight = n_height; <br> int bufferlength = 400; <br> int framestep =6; <br> int framerest =2; <br> int framecounter =0; <br> int currentpic = bufferlength-1; <br> BImage[] frames = new BImage[bufferlength]; <br> BImage start = new BImage(); <br> MHI tester; <br> &nbsp;<br> void setup(){ <br> &nbsp;<br> &nbsp; size(640,480); <br> &nbsp;<br> &nbsp; beginVideo(n_width,n_height,30); <br> &nbsp;<br> &nbsp; tester = new MHI(); <br> &nbsp; bgpixels = new int[n_pix]; <br> &nbsp; diffpix = new int[n_pix]; <br> &nbsp; showdiffpix = new int[n_pix]; <br> &nbsp;<br> &nbsp; start.width = quadwidth; <br> &nbsp; start.height = quadheight; <br> &nbsp; start.pixels = new color[quadwidth*quadheight]; &nbsp; <br> &nbsp; <br> &nbsp; &nbsp;<br> &nbsp; for(int k =0; k&lt; n_pix; k++){ <br> &nbsp;<br> &nbsp; &nbsp; bgpixels[k]=0; <br> &nbsp; &nbsp; diffpix[k]=0; <br> &nbsp; &nbsp; showdiffpix[k]=0; <br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> &nbsp; for(int i=0; i&lt;n_pix;i+=10){ <br> &nbsp; &nbsp; bgpixels[i] = video.pixels[i]; <br> &nbsp; } <br> &nbsp; for(int j=0; j&lt;start.pixels.length;j++){ <br> &nbsp; start.pixels[j] = color(150,0,0); <br> &nbsp; } <br> &nbsp; &nbsp;clearBuffer(); <br> } <br> &nbsp;<br> void keyPressed(){ <br> &nbsp;<br> &nbsp; switch(key){ <br> &nbsp;<br> &nbsp; &nbsp; case 'b': <br> &nbsp; &nbsp; for(int i=0; i&lt;n_pix;i++){ <br> &nbsp;<br> &nbsp;color b = video.pixels[i]; <br> &nbsp;<br> &nbsp;bgR = (b &amp; redmask) &nbsp; &gt;&gt;16; <br> &nbsp;<br> &nbsp;bgG = (b &amp; greenmask) &gt;&gt;8; <br> &nbsp;<br> &nbsp;bgB = (b &amp; bluemask); <br> &nbsp;<br> &nbsp;bg_brightness = (bgR+bgG+bgB)/3; <br> &nbsp;<br> &nbsp;bgpixels[i] = bg_brightness; <br> &nbsp;<br> &nbsp; &nbsp; } <br> &nbsp; &nbsp; break; <br> &nbsp; &nbsp;case ' ': <br> &nbsp; &nbsp;clearBuffer(); <br> &nbsp; &nbsp;break; <br> &nbsp; &nbsp;<br> &nbsp; &nbsp;<br> &nbsp; } <br> } <br> &nbsp;<br> void clearBuffer(){ <br> &nbsp;for(int a=0; a&lt; frames.length;a++){ <br> &nbsp; frames[a] = start.copy(); <br> &nbsp; } <br> &nbsp;<br> } <br> &nbsp;<br> void loop(){ <br> &nbsp;<br> &nbsp; // image(video,160,120); <br> &nbsp;<br> &nbsp; showdiffpix = tester.findMHI(); <br> &nbsp;<br> &nbsp; // classic kludge, bad idea. <br> &nbsp; int i=0; <br> &nbsp; int row, loc; <br> &nbsp; for (int y=0; y&lt;n_height; y++){ <br> &nbsp; &nbsp; row = y * width; <br> &nbsp; &nbsp; for (int x=0; x&lt;n_width; x++){ <br> &nbsp;loc = row + x; <br> &nbsp;pixels[loc] = showdiffpix[i]; <br> &nbsp;i++; <br> &nbsp; &nbsp; } <br> &nbsp;<br> &nbsp; &nbsp;} <br> &nbsp; &nbsp; &nbsp;for(int j=0; j&lt;vquads; j++){ <br> &nbsp; for(int m=0; m&lt;hquads; m++){ <br> &nbsp; &nbsp; set(m*quadwidth, j*quadheight, frames[currentpic]); <br> &nbsp; &nbsp; currentpic+= framestep; <br> &nbsp; &nbsp; currentpic = currentpic%bufferlength; <br> &nbsp; &nbsp; if (currentpic&lt;0) currentpic = bufferlength + currentpic; &nbsp; <br> &nbsp; } <br> &nbsp; &nbsp; &nbsp;} <br> &nbsp; &nbsp; framecounter++; <br> &nbsp; if(framecounter &gt; framerest){ <br> &nbsp; framecounter = 0; <br> &nbsp; currentpic--; <br> &nbsp; if(currentpic &lt;0) currentpic = bufferlength -1; <br> &nbsp; } <br> &nbsp;<br> &nbsp;<br> } <br> &nbsp;<br> 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="2"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>K1diN5An3</b><br><BR>
    <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: ahhh HELP!! java.langOutOfMemoryError</b><BR>
                &#171; <B>Reply #2 on:</B> Dec 5<sup>th</sup>, 2004, 10:01am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            this is the last of it. and where i bet the problems are... <br> &nbsp;<br> class MHI{ <br> &nbsp;<br> &nbsp; int white,black,threshold,colorbit,offsetbit,r,g,b; <br> &nbsp; float brightnessPix, diff_bright,dpr,dpg,dpb; <br> &nbsp; float csdr, csdg, csdb; <br> &nbsp; color csdp, c, grayscale; <br> &nbsp; int nw_,nw,n__,n_,ne_,ne,cw_,cw,c__,c_,ce_,ce,sw_,sw,s__,s_,se_,se,difx,dify ; <br> &nbsp; int skip =8; <br> &nbsp; int del =1; <br> &nbsp; float dec = 10; <br> &nbsp; boolean move = false; <br> &nbsp; int [] mhi = new int[n_pix]; <br> &nbsp; float [] gradiantOrientation = new float[n_pix]; <br> &nbsp; int [] gradiantMagnitude = new int[n_pix]; <br> &nbsp;<br> &nbsp; MHI(){ <br> &nbsp;<br> &nbsp; &nbsp; offsetbit = 10; <br> &nbsp; &nbsp; white = (colorbit&lt;&lt;16) + (colorbit&lt;&lt;<img border=0 src="public_html/YaBBImages/cool.gif"> + colorbit; <br> &nbsp; &nbsp; black= 0; <br> &nbsp; &nbsp; threshold = 20; <br> &nbsp;<br> &nbsp; &nbsp; for(int i=0;i&lt;n_pix;i++){ <br> &nbsp;mhi[i]=0; <br> &nbsp;gradiantOrientation[i]=0; <br> &nbsp;<br> &nbsp;gradiantMagnitude[i]=0; <br> &nbsp; &nbsp; } <br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> &nbsp; int[] findMHI(){ <br> &nbsp;<br> &nbsp; &nbsp; //make sure to keep track of the coordinates of when movement starts and stops <br> &nbsp;<br> &nbsp; &nbsp; for (int i =0; i &lt;n_pix; i++){ <br> &nbsp;<br> &nbsp;c = video.pixels[i]; <br> &nbsp;<br> &nbsp;r &nbsp;= (c &amp; redmask) &nbsp; &gt;&gt;16; &nbsp;// <br> &nbsp;<br> &nbsp;g &nbsp;= (c &amp; greenmask) &gt;&gt;8; <br> &nbsp;<br> &nbsp;b &nbsp;= (c &amp; bluemask); <br> &nbsp;<br> &nbsp;brightnessPix= (r+b+g)/3.0; //int <br> &nbsp;<br> &nbsp;//currpixels[i] = brightnessPix; <br> &nbsp;diff_bright = abs(brightnessPix - bgpixels[i]); <br> &nbsp;<br> &nbsp;dpr = 0; <br> &nbsp;dpg = 0; <br> &nbsp;dpb = 0; <br> &nbsp;<br> &nbsp;if (diff_bright &gt; threshold){ <br> &nbsp; &nbsp;dpr = 255; <br> &nbsp; &nbsp;dpg = 255; <br> &nbsp; &nbsp;dpb = 255; <br> &nbsp;} <br> &nbsp;<br> &nbsp;csdp = mhi[i]; <br> &nbsp;<br> &nbsp;if(((red(csdp) - offsetbit) &gt; 0) &#124;&#124;((green(csdp) - offsetbit)&gt;0)&#124;&#124;((blue(csdp) - offsetbit)&gt;0)) {move=true;} <br> &nbsp; &nbsp; <br> &nbsp; &nbsp;<br> &nbsp; &nbsp; csdr = max (0, red(csdp) - offsetbit); <br> &nbsp; &nbsp;csdg = max (0, green(csdp) - offsetbit); <br> &nbsp; &nbsp;csdb = max (0, blue(csdp) - offsetbit); <br> &nbsp; <br> &nbsp;csdr = min(255, csdr + dpr); <br> &nbsp;csdg = min(255, csdg + dpg); <br> &nbsp;csdb = min(255, csdb + dpb); <br> &nbsp;<br> &nbsp;grayscale = color (csdr,csdg,csdb); <br> &nbsp;mhi[i] = grayscale; <br> &nbsp;<br> &nbsp; &nbsp; } <br> &nbsp;<br> &nbsp; &nbsp; //smoothmhi(mhi); <br> &nbsp; &nbsp; convolution(mhi); <br> &nbsp;<br> &nbsp; &nbsp; return mhi; <br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> void drawdot(int qx, int qy){ <br> &nbsp; int offsx = qx%quadwidth; <br> &nbsp; int offsy = qy%quadheight; <br> &nbsp; int mx = qx / quadwidth; <br> &nbsp; int my = qy / quadheight; <br> &nbsp; int offsp = mx + my * hquads; <br> &nbsp; int cp = (currentpic + offsp * framestep) % bufferlength; <br> &nbsp; if (cp &lt; 0) cp = bufferlength + cp; <br> &nbsp; frames[cp].set(offsx, offsy, color(200,255,255)); <br> } <br> &nbsp;<br> &nbsp; //Bresenham's algorithm <br> &nbsp; void drawline(float x1, float y1, float x2, float y2){ <br> &nbsp; &nbsp; { <br> &nbsp;int sizex, sizey, incx, incy,drawx,drawy; <br> &nbsp;int countx, county, x, y; <br> &nbsp;sizex=(int)x2-(int)x1; <br> &nbsp;sizey=(int)y2-(int)y1; <br> &nbsp;<br> &nbsp;if(sizex&lt;0) { <br> &nbsp; &nbsp;sizex=-sizex; <br> &nbsp; &nbsp;incx=-1; <br> &nbsp;} else { <br> &nbsp; &nbsp;incx=1; <br> &nbsp;} <br> &nbsp;<br> &nbsp;if(sizey&lt;0) { <br> &nbsp; &nbsp;sizey=-sizey; <br> &nbsp; &nbsp;incy=-1; <br> &nbsp;}else { <br> &nbsp; &nbsp;incy = 1; <br> &nbsp;} <br> &nbsp;countx=(int)x1; <br> &nbsp;county=(int)y1; <br> &nbsp;drawx = (int)x1; <br> &nbsp;drawy = (int)y1; <br> &nbsp;<br> &nbsp;drawdot(drawx, drawy); <br> &nbsp;if (sizex&gt;=sizey) { <br> &nbsp; &nbsp;y=sizex&gt;&gt;1; <br> &nbsp; &nbsp;for(int i=0;i&lt;sizex;i++) { <br> &nbsp; &nbsp; &nbsp;y+=sizey; <br> &nbsp; &nbsp; &nbsp;if (y&gt;=sizex) { <br> &nbsp; y-=sizex; <br> &nbsp; county+=incy; <br> &nbsp; &nbsp; &nbsp;} <br> &nbsp; &nbsp; &nbsp;countx+=incx; <br> &nbsp; &nbsp; &nbsp;drawdot(countx, county); <br> &nbsp; &nbsp;} <br> &nbsp;} else { <br> &nbsp; &nbsp;x=sizey&gt;&gt;1; <br> &nbsp; &nbsp;for(int i=0;i&lt;sizey;i++) { <br> &nbsp; &nbsp; &nbsp;x+=sizex; <br> &nbsp; &nbsp; &nbsp;if (x&gt;=sizey) { <br> &nbsp; x-=sizey; <br> &nbsp; countx+=incx; <br> &nbsp; &nbsp; &nbsp;} <br> &nbsp; &nbsp; &nbsp;county+=incy; <br> &nbsp; &nbsp; &nbsp;drawdot(countx, county); <br> &nbsp; &nbsp;} <br> &nbsp;} <br> &nbsp; &nbsp; } <br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> &nbsp; void convolution(int[] mhi){ <br> &nbsp;<br> &nbsp; &nbsp; int sobelx=0; <br> &nbsp; &nbsp; int sobely=0; <br> &nbsp; &nbsp; float dx,dy; <br> &nbsp; &nbsp; float px =1; <br> &nbsp; &nbsp; float py=1; <br> &nbsp; &nbsp; float constant =1; <br> &nbsp;<br> &nbsp; &nbsp; for(int y = skip; y &lt; (160-skip); y+=skip) <br> &nbsp;<br> &nbsp; &nbsp; { <br> &nbsp;<br> &nbsp;for(int x = skip; x &lt; (120-skip); x+=skip) <br> &nbsp;<br> &nbsp;{ <br> &nbsp;<br> &nbsp; &nbsp;nw_ = (x-del)*(y-del); <br> &nbsp; &nbsp;n__ = x*(y-del); <br> &nbsp; &nbsp;ne_ = (x+del)*(y-del); <br> &nbsp;<br> &nbsp; &nbsp;cw_ = (x-del)*(y); <br> &nbsp; &nbsp;c__ = x*y; <br> &nbsp; &nbsp;ce_ = (x+del)*(y); <br> &nbsp;<br> &nbsp; &nbsp;sw_ = (x-del)*(y+del); <br> &nbsp; &nbsp;s__ = x*(y+del); <br> &nbsp; &nbsp;se_ =(x+del)*(y+del); <br> &nbsp;<br> &nbsp; &nbsp;nw = mhi[nw_]; <br> &nbsp; &nbsp;n_ = mhi[n__]; <br> &nbsp; &nbsp;ne = mhi[ne_]; <br> &nbsp;<br> &nbsp; &nbsp;cw = mhi[cw_]; <br> &nbsp; &nbsp;c_ = mhi[c__]; <br> &nbsp; &nbsp;px = mhi[c__]; <br> &nbsp; &nbsp;ce = mhi[ce_]; <br> &nbsp;<br> &nbsp; &nbsp;sw = mhi[sw_]; <br> &nbsp; &nbsp;s_ = mhi[s__]; <br> &nbsp; &nbsp;se = mhi[se_]; <br> &nbsp;<br> &nbsp; &nbsp;//sum of the differences in x <br> &nbsp; &nbsp;difx = (ne - n_)+(n_ - nw)+(ce - c_)+(c_ - cw)+(se - s_)+(s_ - sw); <br> &nbsp; &nbsp;//sum of the differnces in y <br> &nbsp; &nbsp;dify = (nw - cw)+(cw - sw)+(n_ - c_)+(c_ - s_)+(ne - ce)+(ce - se); <br> &nbsp;<br> &nbsp; &nbsp;//if pixels are zero don't use them <br> &nbsp; &nbsp;//if pixels are surrounded by 0 <br> &nbsp;<br> &nbsp; &nbsp;if( (c_ != 0) &amp;&amp; (nw !=0) &amp;&amp; (n_ !=0) &amp;&amp; (ne!=0) &amp;&amp; (cw !=0) &amp;&amp; (ce!=0) &amp;&amp; (sw!=0) &amp;&amp; (s_ !=0) &amp;&amp; (se !=0) &amp;&amp; (move==true)) &nbsp;// and if the differences in x an y are really big orreally small <br> &nbsp; &nbsp;{ <br> &nbsp; &nbsp; &nbsp;sobelx = (ne * -1)+(n_ * 0)+(nw * 1)+(ce * -2)+(c_ * 0)+(cw * 2)+(se *-1)+(s_ * 0)+(sw * 1); <br> &nbsp; &nbsp; &nbsp;sobely = (ne * -1)+(n_ * -2)+(nw * -1)+(ce * 0)+(c_ * 0)+(cw * 0)+(se *-1)+(s_ * 2)+(sw * 1); <br> &nbsp;<br> &nbsp; &nbsp; &nbsp;gradiantMagnitude[c__] = abs(sobelx) + abs(sobely); <br> &nbsp; &nbsp; &nbsp;gradiantOrientation[c__]= atan2(sobely,sobelx); <br> &nbsp;<br> &nbsp; &nbsp; &nbsp;dx = gradiantMagnitude[c__] * sin(gradiantOrientation[c__]+(PI/2)) * constant; <br> &nbsp; &nbsp; &nbsp;dy = gradiantMagnitude[c__] * sin(gradiantOrientation[c__]) * constant; <br> &nbsp; &nbsp; &nbsp;px += dx; <br> &nbsp; &nbsp; &nbsp;py += dy; <br> &nbsp; <br> &nbsp; &nbsp; if(random(1)&gt;.9){ <br> &nbsp; drawline(px,py,dx,dy); <br> &nbsp; &nbsp; &nbsp;} <br> &nbsp; &nbsp; <br> &nbsp; &nbsp;} <br> &nbsp; &nbsp;<br> &nbsp;<br> &nbsp;} <br> &nbsp;<br> &nbsp; &nbsp; } <br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> } 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="3"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>Philipp</b><br><BR>
             <a href="http://www.repeatwhiletrue.com" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a>  <img src="public_html/YaBBImages/email.gif" alt="Email" border="0"><BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: ahhh HELP!! java.langOutOfMemoryError</b><BR>
                &#171; <B>Reply #3 on:</B> Dec 10<sup>th</sup>, 2004, 3:45pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            I don't think it's your MHI class. <br> I can replicate your problem with this code: <br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;<br> &nbsp;<br> BImage&#91;&#93; bar = new BImage&#91;600&#93;; <br> &nbsp;<br> void setup &#40;&#41; { <br> &nbsp; BImage ba = new BImage&#40;&#41;; <br> &nbsp; ba&#46;width = 200; <br> &nbsp; ba&#46;height = 200; <br> &nbsp; ba&#46;pixels = new color&#91;200*200&#93;; <br> &nbsp;<br> &nbsp; for &#40;int i=0; i &lt;bar&#46;length;i++&#41; { <br> &nbsp; bar&#91;i&#93; = ba&#46;copy&#40;&#41;; <br> &nbsp; } <br> } <br> &nbsp;<br> void loop&#40;&#41; { <br> } <br> &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> What's interesting is that it works the first time I run it and refuses to work the second time, so my guess is that there are problems with the garbage collection of the BImages. Using int[][] arrays instead of the BImage[] array doesn't help though. <br> Adding the following code rectified the situation on my machine. See if you can do something similar. <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> public void stop&#40;&#41; { <br> &nbsp; for &#40;int i=0; i &lt;bar&#46;length;i++&#41; { <br> &nbsp; &nbsp; bar&#91;i&#93; = null; <br> &nbsp; } <br> } <br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> If that doesn't help try increasing the memory for Processing. (check the readme file to see how you can do that.) 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Dec 10<sup>th</sup>, 2004, 3:46pm by Philipp</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<!-- THIS IS THE BOTTOM HEADER -->
<table border=0 width="100%" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
    <td>
    <table cellpadding="4" cellspacing="1" border="0" width="100%">
      <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align=right>
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table><br>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td align="left" valign="top" colspan="2">
    </td>
    <td valign="top" height="18" align="right">
<form method="post" action="board_Programs_action_display_num_1102236971.html" name="jump">
<select name="values" onChange="if(this.options[this.selectedIndex].value) window.location.href="index.html" + this.options[this.selectedIndex].value;">
<option value="">Forum Jump:</option>
<option value="">-----------------------------</option>
<option value="#Discuss">Discussion</option>
<option value="">-----------------------------</option><option value="?board=Collaboration">&nbsp; - Community, Collaboration, Status</option>
<option value="?board=Events">&nbsp; - Events, Publications, Propaganda</option>
<option value="?board=general">&nbsp; - General Processing Discussion</option>
<option value="">-----------------------------</option>
<option value="#help">Programming Questions & Help</option>
<option value="">-----------------------------</option><option value="?board=Syntax">&nbsp; - Syntax</option>
<option selected value="?board=Programs">=> Programs</option>
<option value="?board=Integrate">&nbsp; - Integration</option>
<option value="">-----------------------------</option>
<option value="#Examples">Topics & Contributions</option>
<option value="">-----------------------------</option><option value="?board=Tools">&nbsp; - Tools</option>
<option value="?board=Contribution_Responsive">&nbsp; - Responsive Form, Games</option>
<option value="?board=Contribution_Info">&nbsp; - Information Visualization</option>
<option value="?board=Contribution_Simlation">&nbsp; - Simulation, Artificial Life</option>
<option value="?board=Contribution_Physical">&nbsp; - Tangible Computing</option>
<option value="?board=Contribution_Automated">&nbsp; - Automated Systems</option>
<option value="?board=Contributions_Audiovisual">&nbsp; - Sound</option>
<option value="?board=VideoCamera">&nbsp; - Video, Camera</option>
<option value="?board=Contributions_Beyond">&nbsp; - Beyond Categories</option>
<option value="">-----------------------------</option>
<option value="#Suggestions">Suggestions</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_Software">&nbsp; - Software Suggestions</option>
<option value="?board=proce55ing_website">&nbsp; - Website, Reference, Example Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Bugs">Bugs</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_software_bugs">&nbsp; - Software Bugs</option>
<option value="?board=Proce55ing_website_bugs">&nbsp; - Website, Reference, Example Bugs</option>
<option value="?board=BugFixes">&nbsp; - Bug Fixes, Implemented Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Teaching">Teaching</option>
<option value="">-----------------------------</option><option value="?board=CourseBlueprints">&nbsp; - Course Blueprints</option>
<option value="?board=TheoryandPractice">&nbsp; - Theory and Practice</option>
</select>
</form></td>
  </tr><tr>
    <td colspan="3" valign="top" align="right">&#171; <a href="board_Programs_action_display_num_1102177687.html">Previous topic</a> | <a href="board_Programs_action_display_num_1102311303.html">Next topic</a> &#187;</td>
  </tr>
</table>
</td>
  </tr>
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55" height="160"></td>
    <td width="695" valign="bottom"><style type="text/css">/*
<a href="index.html"><font size="1">Processing 1.0 _ALPHA_</font></a> &#187; <font size="1">Powered by</font> <a href="http://www.yabbforum.com"><font size="1">YaBB 1 Gold - SP 1.1</font></a><font size="1">!<BR>
YaBB © 2000-2002, </font><a href="http://www.xnull.com"><font size="1">Xnull</font></a><font size="1">. All Rights Reserved.</font>
*/</style></td>
  </tr>
</table>
</body>
</html>
