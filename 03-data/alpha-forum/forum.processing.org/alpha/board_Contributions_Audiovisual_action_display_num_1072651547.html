<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Processing 1.0 _ALPHA_ - timestruct</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15">
	<link type="text/css" href="style.css" rel="stylesheet" >
<script language="JavaScript1.2" type="text/javascript">
<!--
if ((navigator.appVersion.substring(0,1) == "5" && navigator.userAgent.indexOf('Gecko') != -1) || navigator.userAgent.search(/Opera/) != -1) {
   document.write('<META HTTP-EQUIV="pragma" CONTENT="no-cache">');
}
// -->
</script>
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#CC6600" vlink="#CC6600" alink="#CC6600" leftmargin="0" topmargin="0" rightmargin="0">
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="550" colspan="2" bgcolor="#000000"> <img src="images/processing.gif" width="500" height="50"></td>
    <td width="180" align="right" valign="top" bgcolor="#000000"> <img src="images/1pix.gif" width="100" height="5"><br>
        <a href="https://forum.processing.org/faq/index.html"><font color="#CC9900">FAQ</font></a> 
    </td>
    <td width="20" bgcolor="#000000"><img src="images/nav_topright.gif" width="20" height="50"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55" bgcolor="#996600" valign="top"><img src="images/nav_midleft.gif" width="55" height="25"></td>
    <td width="675" valign="top" rowspan="2"> 
      <table width="675" valign="top" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td height="25" bgcolor="#996600"><a href="http://processing.org/"><font color="#FFFFFF">Cover</font></a></td>
		<td height="25" bgcolor="#996600"><div id="menu_right" style="float: right">
			<a href="http://feed.processing.org/">&raquo;Feed</a> &nbsp;
			<a href="http://forum.processing.org/">&raquo;Forum</a> &nbsp;
			<a href="http://wiki.processing.org/">&raquo;Wiki</a> &nbsp;
			<a href="http://code.google.com/p/processing">&raquo;Code</a>
		</div></td>
        </tr>

      </table>
    </td>
    <td width="20" bgcolor="#996600" valign="top"></td>
  </tr>
  <tr>
	<td height="25" colspan="3"></td>
  </tr>
</table>
<table width="750" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td width="55"><img src="images/1pix.gif" width="1" height="25"></td>
    <td width="695"> </td>
  </tr>
  <tr>
    <td><img src="images/1pix.gif" width="55" height="1"></td>
    <td align="left" valign="top"><b>
		This is the archive Discourse for the Processing (ALPHA) software. <br />
		Please visit the <a href="http://forum.processing.org/">new Processing forum</a> for current information.
		<br />
		<br />
		</b>
	</td>
  </tr>
  <tr> 
    <td><img src="images/1pix.gif" width="55" height="45"></td>
  </tr>
</table>
<!--#echo banner=""--> 
<table width="750" align="left" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55"></td>
    <td width="695">
<script language="JavaScript1.2" src="public_html/ubbc.js" type="text/javascript"></script>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td valign=bottom colspan="2"><font class="nav"><B>
    <img src="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="index.html" class="nav">Processing 1.0 _ALPHA_</a><br>
    <img src="public_html/YaBBImages/tline.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Contributions_Audiovisual_action_display_num_1072651547.html#Examples" class="nav">Topics & Contributions
</a><br>
    <img src="public_html/YaBBImages/tline2.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    <a href="board_Contributions_Audiovisual.html" class="nav">Sound</a> </b>(Moderators: pitaru, REAS)<b><br>
    <img SRC="public_html/YaBBImages/tline3.gif" border="0" alt=""><IMG SRC="public_html/YaBBImages/open.gif" border="0" alt="">&nbsp;&nbsp;
    timestruct</b></font></td>
    <td valign="bottom" align="right">&#171; <a href="board_Contributions_Audiovisual_action_display_num_1073021318.html">Previous topic</a> | <a href="board_Contributions_Audiovisual_action_display_num_1072554740.html">Next topic</a> &#187;</td>
  </tr>
</table>
<BR>
<!-- THIS IS THE TOP HEADER OF THE CATEGORY -->
<table border="0" width="100%" cellspacing="1" cellpadding="4" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align="right">
            </td>
          </tr>
        </table>
  </tr>
</table>
<!-- THIS IS THE BOARD AUTHOR HEADER -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="1" border="0" width="100%">
      <tr>
        <td valign="middle" align="left" width="20%" bgcolor="#999966" class="titlebg">
        <font class="text1" color="#FFFFFF">&nbsp;<img src="public_html/YaBBImages/thread.gif" alt="">
        &nbsp;<b>Author</b></font></td>
        <td valign="middle" align="left" bgcolor="#999966" class="titlebg" width="80%">
        <font class="text1" color="#FFFFFF"><b>&nbsp;Topic: timestruct</b> &nbsp;(Read 522 times)</font></td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<a name="0"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>swannodette</b><br><BR><a href="aim:goim?screenname=swannodette&message=Hi.+Are+you+there?"><img src="public_html/YaBBImages/aim.gif" alt="swannodette" border="0"></a>
     <a href="http://www.onager.org/~dnolen/" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>timestruct</b><BR>
                &#171; <B> on:</B> Dec 28<sup>th</sup>, 2003, 11:45pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Using footage from my brand new Canon PowerShot SD100 i made a project that samples different points of a video buffer- resulting in a fractured time study.  There's lots of possibilities here for creating interesting film/video projects. <br> &nbsp;<br> to see quicktime movies of the results link to: <br> &nbsp;<br> <a href="http://www.onager.org/~dnolen/timestruct.html" target="_blank">http://www.onager.org/~dnolen/timestruct.html</a> <br> &nbsp;<br> if anybody has any pointers on making this code faster that would be greatly appreciated-  there's a lot of pixel copying; Thus the applet is only really good for rendering and not realtime.  Also it seems that copying a Bvideo.pixels field to a BImage.pixels field results in just passing a pointer to the video- also it would be nice if there was a method like image(BVideo, 0, 0) that returned a BImage. <br> &nbsp;<br> anyways: <br> &nbsp;<br> //12-25-03 dissecting time by the pixel <br> &nbsp;<br> int FPS = 30; <br> int BUFSIZE = 48; <br> BVideo myvid; <br> BImage[] vidBuffer = new BImage[BUFSIZE]; <br> int counter = 0; <br> &nbsp;<br> void setup() { <br> &nbsp; framerate(30); <br> &nbsp; myvid = loadVideo(&quot;momma.mov&quot;); <br> &nbsp; size(320, 240); <br> &nbsp; repeat(myvid); <br> &nbsp;  <br> &nbsp; //create a buffer of the first 96 images of the movie <br> &nbsp; //init the buffer since processing doesn't allow for &nbsp;<br> &nbsp; //creating empty BImage objects <br> &nbsp;  <br> &nbsp; for(int i = 0; i&lt;BUFSIZE; i++) <br> &nbsp;   vidBuffer[i] = loadImage(&quot;initframe.jpg&quot;); <br> } <br> &nbsp;<br> void loop() { <br> &nbsp; BImage modframe = loadImage(&quot;initframe.jpg&quot;); <br> &nbsp; int frameinc = 0, curframe = 0, cp=0; <br> &nbsp;  <br> &nbsp; background(0); <br> &nbsp;  <br> &nbsp; if(counter &lt; BUFSIZE) { <br> &nbsp;   //load first 48 frames <br> &nbsp;   for(int i = 0; i&lt; myvid.width*myvid.height; i++) <br> &nbsp;     vidBuffer[counter].pixels[i] = myvid.pixels[i]; <br> &nbsp; } else { <br> &nbsp;   //get a frame from buffer <br> &nbsp;   modframe = vidBuffer[0]; <br> &nbsp; <br> &nbsp;   //modify the modframe <br> &nbsp;   //the fun and tricky part <br> &nbsp;    <br> &nbsp;   for(int r = 0; r&lt;modframe.height; r++) { <br> &nbsp;     //split into rows, inelegant I know <br> &nbsp;     if(cp&lt;modframe.width*(modframe.height/4)) <br> &nbsp;       curframe = 0; <br> &nbsp;     else if(cp&lt;modframe.width*2*(modframe.height/4)) <br> &nbsp;       curframe = BUFSIZE/4; <br> &nbsp;     else if(cp&lt;modframe.width*3*(modframe.height/4)) <br> &nbsp;       curframe = 2*BUFSIZE/4; <br> &nbsp;     else <br> &nbsp;       curframe = 3*BUFSIZE/4; <br> &nbsp;      <br> &nbsp;     //draw columns   &nbsp;<br> &nbsp;     for(int n=0; n&lt;6; n++) { <br> &nbsp;       for(int m=0; m&lt;modframe.width/6; m++) { <br> &nbsp;         cp = r*modframe.width+n*(modframe.width/6)+m; <br> &nbsp;         modframe.pixels[cp] = vidBuffer[curframe].pixels[cp]; <br> &nbsp;       } <br> &nbsp;       curframe+=BUFSIZE/24; <br> &nbsp;     } <br> &nbsp;   } <br> &nbsp;    <br> &nbsp;   //display the new frame <br> &nbsp;   image(modframe, 0, 0); <br> &nbsp;    <br> &nbsp;   //move all frames in the video buffer up one <br> &nbsp;   //have to copy all the pixel one by one since copying just <br> &nbsp;   //the .pixels field actually just passes a reference to the video <br> &nbsp;   for(int j = 1; j &lt; BUFSIZE; j++) <br> &nbsp;     for(int i = 0; i&lt; myvid.width*myvid.height; i++) <br> &nbsp;       vidBuffer[j-1].pixels[i] = vidBuffer[j].pixels[i]; <br> &nbsp;    <br> &nbsp;   //copy current vidframe into last fram of buffer   <br> &nbsp;   for(int i = 0; i&lt; myvid.width*myvid.height; i++) <br> &nbsp;     vidBuffer[BUFSIZE-1].pixels[i] = myvid.pixels[i]; <br> &nbsp;   } <br> &nbsp;    <br> &nbsp;   //save an image so I can make a .mov of this nonsense <br> &nbsp;   saveFrame(); <br> &nbsp;   counter++; <br> } 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Dec 28<sup>th</sup>, 2003, 11:46pm by swannodette</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="1"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>TomC</b><br><BR>
     <a href="http://www.tom-carden.co.uk/p5" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: timestruct</b><BR>
                &#171; <B>Reply #1 on:</B> Dec 29<sup>th</sup>, 2003, 1:49am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Hey, that's neat. Reminds me of a slide puzzle, but that's a sketch for another day <img border=0 src="public_html/YaBBImages/smiley.gif"> <br> &nbsp;<br> Playing around, I reckon you can get a bit of a speed nudge by replacing... <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp; &nbsp; for&#40;int i = 0; i&lt; video&#46;pixels&#46;length; i++&#41; &nbsp;<br> &nbsp;vidBuffer&#91;counter&#93;&#46;pixels&#91;i&#93; = video&#46;pixels&#91;i&#93;; &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> with <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;vidBuffer&#91;counter&#93; = video&#46;copy&#40;width,height&#41;; &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> Also, I think there is an as yet undocumented constructor for BImage which might help you out. &nbsp;Rather than <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> vidBuffer&#91;i&#93; = loadImage&#40;&quot;initframe&#46;jpg&quot;&#41;; &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> Try <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> vidBuffer&#91;i&#93; = new BImage&#40;width, height&#41;; &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> &nbsp;<br> After that, things get a little more complex, but bear with me. &nbsp;Rather than always having the same place in your buffer as the current frame (shuffling your buffer down one frame each time), you can just keep track of which buffer is current, and then add that to the index when accessing the array, modulo buffer length. <br> &nbsp;<br> Erm... I'll try an example. <br> &nbsp;<br> Rather than: <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;<br> &#47;&#47; remember 100 frames, &nbsp;<br> &#47;&#47; &#40;buffer&#91;0&#93; is most recent, buffer&#91;99&#93; is oldest&#41; <br> BImage&#91;&#93; buffer = new BImage&#91;100&#93;; <br> &nbsp;<br> void setup&#40;&#41; { <br> &nbsp; size&#40;320,240&#41;; <br> &nbsp; beginVideo&#40;width,height,30&#41;; <br> &nbsp; for &#40;int i = 0; i &lt; buffer&#46;length; i++&#41; <br> &nbsp; &nbsp; buffer&#91;i&#93; = new BImage&#40;width,height&#41;; <br> } <br> &nbsp;<br> void loop&#40;&#41; { <br> &nbsp; &#47;&#47; copy each buffer image back one place <br> &nbsp; for &#40;int i = 1; i &lt; buffer&#46;length; i++&#41; <br> &nbsp; &nbsp; buffer&#91;i&#45;1&#93; = buffer&#91;i&#93;; <br> &nbsp; &#47;&#47; store current <br> &nbsp; buffer&#91;buffer&#46;length&#45;1&#93; = video&#46;copy&#40;&#41;; <br> &nbsp; &#47;&#47; display last <br> &nbsp; image&#40;buffer&#91;0&#93;,0,0&#41;; &nbsp;<br> } <br> &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> Do this: <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &#47;&#47; remember 100 frames <br> BImage&#91;&#93; buffer = new BImage&#91;100&#93;; <br> &#47;&#47; remember where the oldest frame is <br> int oldestFrame = 0; <br> &nbsp;<br> void setup&#40;&#41; { <br> &nbsp; size&#40;320,240&#41;; <br> &nbsp; beginVideo&#40;width,height,30&#41;; <br> &nbsp; for &#40;int i = 0; i &lt; buffer&#46;length; i++&#41; <br> &nbsp; &nbsp; buffer&#91;i&#93; = new BImage&#40;width,height&#41;; <br> } <br> &nbsp;<br> void loop&#40;&#41; { <br> &nbsp; &#47;&#47; &#40;now there's no need to move every frame in the buffer&#46;&#46;&#46;&#41; <br> &nbsp; &#47;&#47; store current frame, buffer&#46;length&#45;1 places away from oldestFrame <br> &nbsp; buffer&#91;&#40;oldestFrame+buffer&#46;length&#45;1&#41;%buffer&#46;length&#93; = video&#46;copy&#40;&#41;; <br> &nbsp; &#47;&#47; display oldestFrame <br> &nbsp; image&#40;buffer&#91;oldestFrame%buffer&#46;length&#93;,0,0&#41;; &nbsp;<br> &nbsp; oldestFrame++; <br> } <br> &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> I think it should be quicker, but it probably only depends on buffer length now, since we're using the copy method rather than doing it per pixel. <br> &nbsp;<br> I'll post my modified version in a minute. <br> 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="2"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#D7D7AF" class="windowbg">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg" bgcolor="#D7D7AF" border="0">
          <tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="20%" rowspan="2">
            <b>TomC</b><br><BR>
     <a href="http://www.tom-carden.co.uk/p5" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg" bgcolor="#D7D7AF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: timestruct</b><BR>
                &#171; <B>Reply #2 on:</B> Dec 29<sup>th</sup>, 2003, 2:04am &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            OK, this works in just about real-time for me, at 320x240. <br> &nbsp;<br> (The original version did too actually, to be fair.  That means that there's no guarantee my optimisations represent anything other than coding preferences.  Let me know how you get on.) <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &nbsp;<br> &#47;&#47;12&#45;25&#45;03 dissecting time by the pixel &#40;swannodette&#41; <br> &#47;&#47;12&#45;28&#45;03 with luck, some optimisations &#40;TomC&#41; <br> &nbsp; <br> int FPS = 30; &nbsp;<br> int BUFSIZE = 48; &nbsp;<br> &nbsp;<br> BImage&#91;&#93; vidBuffer = new BImage&#91;BUFSIZE&#93;; &nbsp;<br> BImage modframe; <br> int counter = 0; <br> &nbsp;<br> void setup&#40;&#41; { &nbsp;<br> &nbsp; size&#40;640,480&#41;; &nbsp;<br> &nbsp; framerate&#40;FPS&#41;; <br> &nbsp; beginVideo&#40;width,height,FPS&#41;; &nbsp;<br> &nbsp;<br> &nbsp; &#47;&#47;create a buffer of the first 96 images of the movie &nbsp;<br> &nbsp; &#47;&#47;init the buffer since processing doesn't allow for   <br> &nbsp; &#47;&#47;creating empty BImage objects &nbsp;<br> &nbsp;  &nbsp;<br> &nbsp; for&#40;int i = 0; i&lt;vidBuffer&#46;length; i++&#41; &nbsp;<br> &nbsp;   vidBuffer&#91;i&#93; = new BImage&#40;width,height&#41;; <br> } &nbsp;<br> &nbsp; <br> void loop&#40;&#41; { &nbsp;<br> &nbsp; if&#40;counter &lt; vidBuffer&#46;length&#41; { &nbsp;<br> &nbsp;   &#47;&#47;load first 48 frames &nbsp;<br> &nbsp;   vidBuffer&#91;counter&#93; = video&#46;copy&#40;&#41;; &nbsp;<br> &nbsp; } &nbsp;<br> &nbsp; else { &nbsp;<br> &nbsp;    <br> &nbsp;   &#47;&#47;get a frame from buffer &nbsp;<br> &nbsp;   modframe = vidBuffer&#91;counter%vidBuffer&#46;length&#93;; &nbsp;<br> &nbsp;  <br> &nbsp;   &#47;&#47;modify the modframe &nbsp;<br> &nbsp;   &#47;&#47;the fun and tricky part &nbsp;<br> &nbsp;   int cp = 0, curframe = 0;     &nbsp;<br> &nbsp;   for&#40;int r = 0; r&lt;modframe&#46;height; r++&#41; { &nbsp;<br> &nbsp;     &#47;&#47;split into rows, inelegant I know &nbsp;<br> &nbsp;     if&#40;cp&lt;modframe&#46;width*&#40;modframe&#46;height&#47;4&#41;&#41; &nbsp;<br> &nbsp;       curframe = 0; &nbsp;<br> &nbsp;     else if&#40;cp&lt;modframe&#46;width*2*&#40;modframe&#46;height&#47;4&#41;&#41; &nbsp;<br> &nbsp;       curframe = vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp;     else if&#40;cp&lt;modframe&#46;width*3*&#40;modframe&#46;height&#47;4&#41;&#41; &nbsp;<br> &nbsp;       curframe = 2*vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp;     else &nbsp;<br> &nbsp;       curframe = 3*vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp;      &nbsp;<br> &nbsp;     &#47;&#47;draw columns     <br> &nbsp;     for&#40;int n=0; n&lt;6; n++&#41; { &nbsp;<br> &nbsp;       for&#40;int m=0; m&lt;modframe&#46;width&#47;6; m++&#41; { &nbsp;<br> &nbsp;         cp = r*modframe&#46;width+n*&#40;modframe&#46;width&#47;6&#41;+m; &nbsp;<br> &nbsp;         modframe&#46;pixels&#91;cp&#93; = vidBuffer&#91;&#40;curframe+counter&#41;%vidBuffer&#46;length&#93;&#46;pixels&#91;cp&#93;; &nbsp;<br> &nbsp;       } &nbsp;<br> &nbsp;       curframe+=vidBuffer&#46;length&#47;24; &nbsp;<br> &nbsp;     } &nbsp;<br> &nbsp;   } &nbsp;<br> &nbsp;    &nbsp;<br> &nbsp;   &#47;&#47;copy current vidframe into last fram of buffer   &nbsp;<br> &nbsp;   vidBuffer&#91;&#40;counter&#45;1&#41;%vidBuffer&#46;length&#93; = video&#46;copy&#40;width,height&#41;;   <br> &nbsp;<br> &nbsp;   &#47;&#47;display the new frame &nbsp;<br> &nbsp;   image&#40;modframe, 0, 0&#41;; &nbsp;<br> &nbsp;<br> &nbsp; } <br> &nbsp;<br> &nbsp; &#47;&#47;save an image so I can make a &#46;mov of this nonsense &nbsp;<br> &nbsp; &#47;&#47;saveFrame&#40;&#41;; &nbsp;<br> &nbsp;    <br> &nbsp; counter++; <br> &nbsp;<br> } &nbsp;<br> &nbsp;<br>  </font></td></tr></table></td></tr></table> <br> &nbsp;<br> &nbsp;<br> On update: <br> &nbsp;<br> Just realised there's no need for modFrame, since you can write directly to pixels. &nbsp;And you always save the currentFrame into the buffer, so there's no need to have that bit of code twice. &nbsp;Also, width*height is the same as pixels.length. <br> &nbsp;<br> It's quite short now, neatly showcasing your algorithm. <br> &nbsp;<br>  <B>Code:</B><table bgcolor="#FFFFFF" class="bordercolor" cellspacing="1" width="90%"><tr><td><table cellpadding="2" cellspacing="0" class="code" width="100%"><tr><td><font face="Courier New" class="code" size="1"> <br> &#47;&#47;12&#45;25&#45;03 dissecting time by the pixel &#40;swannodette&#41; <br> &#47;&#47;12&#45;28&#45;03 with luck, some optimisations &#40;TomC&#41; <br> &nbsp; <br> int FPS = 30; &nbsp;<br> int BUFSIZE = 48; &nbsp;<br> &nbsp;<br> BImage&#91;&#93; vidBuffer = new BImage&#91;BUFSIZE&#93;; &nbsp;<br> int counter = 0; <br> &nbsp;<br> void setup&#40;&#41; { &nbsp;<br> &nbsp; size&#40;640,480&#41;; &nbsp;<br> &nbsp; framerate&#40;FPS&#41;; <br> &nbsp; beginVideo&#40;width,height,FPS&#41;; &nbsp;<br> } &nbsp;<br> &nbsp; <br> void loop&#40;&#41; { &nbsp;<br> &nbsp;<br> &nbsp; if&#40;counter &gt; vidBuffer&#46;length&#41; { &nbsp;<br> &nbsp; &nbsp; &#47;&#47;the fun and tricky part &nbsp;<br> &nbsp; &nbsp; int cp = 0, curframe = 0; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; for&#40;int r = 0; r &lt; height; r++&#41; { &nbsp;<br> &nbsp;&#47;&#47;split into rows, inelegant I know &nbsp;<br> &nbsp;if&#40;cp &lt; pixels&#46;length&#47;4&#41; &nbsp;<br> &nbsp; &nbsp;curframe = 0; &nbsp;<br> &nbsp;else if&#40;cp &lt; pixels&#46;length&#47;2&#41; &nbsp;<br> &nbsp; &nbsp;curframe = vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp;else if&#40;cp &lt; pixels&#46;length*3&#47;4&#41; &nbsp;<br> &nbsp; &nbsp;curframe = 2*vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp;else &nbsp;<br> &nbsp; &nbsp;curframe = 3*vidBuffer&#46;length&#47;4; &nbsp;<br> &nbsp; &nbsp;<br> &nbsp;&#47;&#47;draw columns &nbsp; &nbsp; <br> &nbsp;for&#40;int n=0; n&lt;6; n++&#41; { &nbsp;<br> &nbsp; &nbsp;for&#40;int m=0; m&lt;width&#47;6; m++&#41; { &nbsp;<br> &nbsp; &nbsp; &nbsp;cp = r*width+n*&#40;width&#47;6&#41;+m; &nbsp;<br> &nbsp; &nbsp; &nbsp;pixels&#91;cp&#93; = vidBuffer&#91;&#40;curframe+counter&#41;%vidBuffer&#46;length&#93;&#46;pixels&#91;cp&#93;; &nbsp;<br> &nbsp; &nbsp;} &nbsp;<br> &nbsp; &nbsp;curframe+=vidBuffer&#46;length&#47;24; &nbsp;<br> &nbsp;} &nbsp;<br> &nbsp; &nbsp; } &nbsp;<br> &nbsp; } <br> &nbsp; &nbsp; &nbsp; <br> &nbsp; &#47;&#47;copy current vidframe into last fram of buffer &nbsp; &nbsp;<br> &nbsp; vidBuffer&#91;&#40;counter+vidBuffer&#46;length&#45;1&#41;%vidBuffer&#46;length&#93; = video&#46;copy&#40;&#41;; &nbsp;<br> &nbsp;<br> &nbsp; &#47;&#47;save an image so I can make a &#46;mov of this nonsense &nbsp;<br> &nbsp; &#47;&#47;saveFrame&#40;&#41;; &nbsp;<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; counter++; <br> &nbsp;<br> } &nbsp;<br> &nbsp;<br>  </font></td></tr></table></td></tr></table> 
            
            </td>
          </tr><tr>
            <td class="windowbg" bgcolor="#D7D7AF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left">&#171; <i>Last Edit: Dec 29<sup>th</sup>, 2003, 2:15am by TomC</i> &#187;</td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
<a name="3"></a>

<!-- THIS IS THE REPEATING MESSAGE TABLE -->
<table cellpadding="0" cellspacing="0" border="0" width="100%" bgcolor="#FFFFFF" class="bordercolor" align="center">
  <tr>
    <td>
    <table cellpadding="3" cellspacing="0" border="0" width="100%">
      <tr>
        <td bgcolor="#FFFFFF" class="windowbg2">
        <table width="100%" cellpadding="4" cellspacing="0" class="windowbg2" bgcolor="#FFFFFF" border="0">
          <tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="20%" rowspan="2">
            <b>swannodette</b><br><BR><a href="aim:goim?screenname=swannodette&message=Hi.+Are+you+there?"><img src="public_html/YaBBImages/aim.gif" alt="swannodette" border="0"></a>
     <a href="http://www.onager.org/~dnolen/" target="_blank"><img src="public_html/YaBBImages/www.gif" alt="WWW" border="0"></a> <BR>

      
            </td>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="top" width="80%" height="100%">

            <!-- THIS TABLE CONTAINS THE HEADER FOR EACH MESSAGE -->
            <table width="100%" border="0">
              <tr>
                <td align="left" valign="middle">
                <B>Re: timestruct</b><BR>
                &#171; <B>Reply #3 on:</B> Dec 29<sup>th</sup>, 2003, 11:09pm &#187;</td>
                <td align="right" valign="top" nowrap height="20">
                

 

                </td>
              </tr>
            </table>
            <hr width="100%" size="1" class="hr">
            
            Thanks for the insights. &nbsp;I actually like your optimization, it makes the code more readable and it's great to know there's a constructor for BImage. &nbsp; <br> &nbsp;<br> I'm running on a 400Mhz Powerbook so anything to speed things up helps. 
            
            </td>
          </tr><tr>
            <td class="windowbg2" bgcolor="#FFFFFF" valign="bottom">
            <!-- I REMOVED THE LOGGED STATMENT HERE -->
            <table width="100%" border="0">
              <tr>
                <td align="left"></td>
                <td align="right">&nbsp;</td>
              </tr>
            </table>
            
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table>

<!-- THIS IS THE BOTTOM HEADER -->
<table border=0 width="100%" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF" class="bordercolor">
  <tr>
    <td>
    <table cellpadding="4" cellspacing="1" border="0" width="100%">
      <tr>
        <td align="left" class="catbg" bgcolor="#B0B07E" width="100%">
        <table cellpadding="3" cellspacing="0" width="100%">
          <tr>
            <td><b>Pages:</b> <b>1</b>&nbsp;</td>
            <td class="catbg" bgcolor="#B0B07E" align=right>
            </td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
</table><br>
<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td align="left" valign="top" colspan="2">
    </td>
    <td valign="top" height="18" align="right">
<form method="post" action="board_Contributions_Audiovisual_action_display_num_1072651547.html" name="jump">
<select name="values" onChange="if(this.options[this.selectedIndex].value) window.location.href="index.html" + this.options[this.selectedIndex].value;">
<option value="">Forum Jump:</option>
<option value="">-----------------------------</option>
<option value="#Discuss">Discussion</option>
<option value="">-----------------------------</option><option value="?board=Collaboration">&nbsp; - Community, Collaboration, Status</option>
<option value="?board=Events">&nbsp; - Events, Publications, Propaganda</option>
<option value="?board=general">&nbsp; - General Processing Discussion</option>
<option value="">-----------------------------</option>
<option value="#help">Programming Questions & Help</option>
<option value="">-----------------------------</option><option value="?board=Syntax">&nbsp; - Syntax</option>
<option value="?board=Programs">&nbsp; - Programs</option>
<option value="?board=Integrate">&nbsp; - Integration</option>
<option value="">-----------------------------</option>
<option value="#Examples">Topics & Contributions</option>
<option value="">-----------------------------</option><option value="?board=Tools">&nbsp; - Tools</option>
<option value="?board=Contribution_Responsive">&nbsp; - Responsive Form, Games</option>
<option value="?board=Contribution_Info">&nbsp; - Information Visualization</option>
<option value="?board=Contribution_Simlation">&nbsp; - Simulation, Artificial Life</option>
<option value="?board=Contribution_Physical">&nbsp; - Tangible Computing</option>
<option value="?board=Contribution_Automated">&nbsp; - Automated Systems</option>
<option selected value="?board=Contributions_Audiovisual">=> Sound</option>
<option value="?board=VideoCamera">&nbsp; - Video, Camera</option>
<option value="?board=Contributions_Beyond">&nbsp; - Beyond Categories</option>
<option value="">-----------------------------</option>
<option value="#Suggestions">Suggestions</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_Software">&nbsp; - Software Suggestions</option>
<option value="?board=proce55ing_website">&nbsp; - Website, Reference, Example Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Bugs">Bugs</option>
<option value="">-----------------------------</option><option value="?board=Proce55ing_software_bugs">&nbsp; - Software Bugs</option>
<option value="?board=Proce55ing_website_bugs">&nbsp; - Website, Reference, Example Bugs</option>
<option value="?board=BugFixes">&nbsp; - Bug Fixes, Implemented Suggestions</option>
<option value="">-----------------------------</option>
<option value="#Teaching">Teaching</option>
<option value="">-----------------------------</option><option value="?board=CourseBlueprints">&nbsp; - Course Blueprints</option>
<option value="?board=TheoryandPractice">&nbsp; - Theory and Practice</option>
</select>
</form></td>
  </tr><tr>
    <td colspan="3" valign="top" align="right">&#171; <a href="board_Contributions_Audiovisual_action_display_num_1073021318.html">Previous topic</a> | <a href="board_Contributions_Audiovisual_action_display_num_1072554740.html">Next topic</a> &#187;</td>
  </tr>
</table>
</td>
  </tr>
  <tr>
    <td width="55"><img src="public_html/YaBBImages/1pix.gif" width="55" height="160"></td>
    <td width="695" valign="bottom"><style type="text/css">/*
<a href="index.html"><font size="1">Processing 1.0 _ALPHA_</font></a> &#187; <font size="1">Powered by</font> <a href="http://www.yabbforum.com"><font size="1">YaBB 1 Gold - SP 1.1</font></a><font size="1">!<BR>
YaBB © 2000-2002, </font><a href="http://www.xnull.com"><font size="1">Xnull</font></a><font size="1">. All Rights Reserved.</font>
*/</style></td>
  </tr>
</table>
</body>
</html>
